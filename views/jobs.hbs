<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Available Jobs</title>
    <link rel="stylesheet" href="'/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <main class="center-content">
        <h2>Available Jobs Posted Here</h2>
        <p>Below, you may browse jobs that have been posted by employers looking for new talent.</p>

        <section class="add-job">
            <h3>Add New Job</h3>
            <form action="/jobs/add" method="POST" class="job-form">
                <label for="title">Job Title:</label><br>
                <input type="text" id="title" name="title" required><br><br>

                <label for="body">Description:</label><br>
                <textarea id="body" name="body" rows="4" required></textarea><br><br>

                <button title ="Click here to add your job to the board." type="submit">Add Job</button>
            </form>
        </section>

        <section class="upload-job">
            <h3>Upload Job from File</h3>
            <form action="/jobs/upload" method="POST" enctype="multipart/form-data">
                <label for="file">Select a .txt file</label><br>
                <input type="file" id="file" name="file" accept=".txt" required><br>
                <button type="submit">Upload</button>
            </form>
        </section>

        <section class="job-list">
            <h3>Current Available Jobs</h3>
            
             {{#if jobs.length}}
                <ul class="jobs">
                    {{#each jobs}}
                        <li class="job-item">
                            <h4>{{this.title}}</h4>
                            <p>{{this.body}}</p>

                            <div class="job-actions">
                                <!-- Delete form -->
                                <form action="/jobs/delete/{{this.job_id}}" method="POST" style="display:inline;">
                                    <button class="fa fa-trash" title ="Click here to PERMANENTLY delete your job post." type="submit" class="delete-btn" onclick="return confirm('Are you SURE you want to delete this job post? THIS CANNOT BE UNDONE.')">Delete</button>
                                </form>

                                <!-- Update form -->
                                <form action="/jobs/update/{{this.job_id}}" method="POST" style="display:inline;">
                                    <input type="text" name="title" value="{{this.title}}" required>
                                    <input type="text" name="body" value="{{this.body}}" required>
                                    <button class= "fa fa-edit" title ="Click here to confirm changes made to the job post." type="submit" class="update-btn">Edit</button>
                                </form>
                            </div>
                        </li>
                    {{/each}}
                </ul>
            {{else}}
                <p>No jobs available yet. Add one above!</p>
            {{/if}}

            <h3>Tips</h3>
            <p><i>Did you know?</i> You can edit posts as many times as you'd like. Just change the information in the job's text field and then click the edit button!</p>
        </section>

    </main>
    
</body>
</html>